<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GSAP Line by Line Animation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Inter, system-ui, sans-serif;
}

body {
  background: #0f172a;
  color: #fff;
  padding: 120px 8vw;
}

.spacer {
  height: 120vh;
}

.text-wrapper {
  max-width: 900px;
  margin: auto;
}

.animate-lines {
  font-size: clamp(28px, 4vw, 56px);
  line-height: 1.3;
  font-weight: 600;
}

/* line wrapper */
.line {
  display: block;
  overflow: hidden;
}

/* animated inner */
.line span {
  display: inline-block;
  transform: translateY(120%);
  opacity: 0;
}
</style>
</head>

<body>

<div class="spacer"></div>

<div class="text-wrapper">
  <p class="animate-lines">
    This text now actually shows on screen.
    Each line animates cleanly and smoothly.
    This is production-ready GSAP animation.
  </p>
</div>

<div class="spacer"></div>

<script>
gsap.registerPlugin(ScrollTrigger);

/* -------- LINE SPLIT FUNCTION -------- */
function splitLines(el) {
  const words = el.innerText.split(" ");
  el.innerHTML = "";

  const temp = document.createElement("span");
  el.appendChild(temp);

  let lines = [];
  let currentLine = "";

  words.forEach(word => {
    temp.innerText = currentLine + word + " ";
    if (temp.getClientRects().length > 1) {
      lines.push(currentLine);
      currentLine = word + " ";
      temp.innerText = currentLine;
    } else {
      currentLine += word + " ";
    }
  });

  lines.push(currentLine);
  el.innerHTML = "";

  lines.forEach(lineText => {
    const line = document.createElement("span");
    line.className = "line";
    line.innerHTML = `<span>${lineText}</span>`;
    el.appendChild(line);
  });
}

/* -------- INIT -------- */
document.querySelectorAll(".animate-lines").forEach(el => {
  splitLines(el);

  const lines = el.querySelectorAll(".line span");

  gsap.to(lines, {
    y: "0%",
    opacity: 1,
    duration: 1,
    ease: "power4.out",
    stagger: 0.12,
    scrollTrigger: {
      trigger: el,
      start: "top 80%",
      toggleActions: "play reverse play reverse"
    }
  });
});
</script>

</body>
</html>
